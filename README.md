# IoT25-TeamF: Smart Traffic for Enhanced Pedestrians (STEP)


# Idea Proposal
< Idea Proposal Presentation Video >
https://youtu.be/StT03squymQ

## Project Overview

### Project Background
◎ 도심 저유동 시간대(밤/새벽)에서의 문제점
- 도심 저유동 시간대의 신호등은 보행자 통행이 드물어 교통 효율성의 향상과 전력 소비와 유지 관리 비용을 줄이기 위해 ‘야간 점멸 운영(Flashing Signal Operation)’모드로 신호등이 전환되어 ‘황색 점멸 신호(Flashing Amber)’ 상태가 유지된다. 보행자가 이 시간대에 도로를 횡단할 때 운전자와 서로 눈치를 보며 횡단해야하는 상태가 된다.

→ 센서를 통해 실제 보행자가 감지된 경우에만 신호를 활성화한다면 명확한 보행 신호 제공으로 사고 위험 감소 및 전력 절감 효과를 얻을 수 있으며 도로 교통 효율성 또한 보장할 수 있게 된다.

◎ 외곽/저밀도 지역(시골 등)에서의 문제점
- 보행자 통행량이 매우 적음에도 불구하고 신호등이 정기적으로 작동하여 차량이 불필요하게 정차하게 되고 교통의 흐름에 방해가 되는 경우가 있다.
- 보행자 신호의 주기를 늘릴 경우 보행자의 신호 대기 시간이 불필요하게 길어진다.

→ 센서를 통해 실제 보행자가 감지될 때만 보행 신호가 작동하는 감응형 시스템을 적용한다면 불필요한 정차를 방지할뿐더러 교통 흐름의 개선, 보행자 대기 시간을 최소화할 수 있으며 전력 절감의 효과도 있다.

◎ 신호 변경을 자각할 수 없는 장애인
- 일반인과 다르게 신호 변경을 자각할 수 없는 장애인들 또한 신호의 변화를 감지할 수 있게 장치를 설치할 필요가 있다

→ 센서가 보행자를 감지하고 신호가 바뀌는 주기 안에는 소리를 통해 경고의 의도를 전달한다.


### Algorithm Design
1. 초기 상태 설정
- 시스템이 부팅되면 기본 상태로 대기하며, 신호등은 차량 신호 ‘녹색’, 보행자 신호 ‘적색’ 상태로 유지된다.
- 보행자가 감지되지 않으면 이 상태를 지속 유지한다.

2. 보행자 감지 단계
- 초음파 센서가 일정 거리 이내(예: 0.5~1.5m)에 물체(사람)를 감지하면, 보행자 존재 여부를 확인한다.
- 오탐 방지를 위해 일정 시간(예: 2초 이상) 지속적으로 감지되었을 경우에만 다음 단계로 넘어간다.

3. 경고 단계
- 보행자가 감지되면, 부저를 짧은 주기로 울려 보행자에게 곧 신호가 변경될 것임을 알린다.
- 경고음은 약 5초간 지속된다.

4. 신호 전환 단계
- 5초 경과 후, 차량 신호를 ‘적색’으로 전환하고 동시에 보행자 신호를 ‘녹색’으로 변경한다.
- 보행자가 안전하게 횡단할 수 있도록 일정 시간(20초) 동안 신호를 유지한다.

5. 리셋 및 대기 상태 복귀
- 보행자 신호 유지 시간이 끝나면, 다시 차량 ‘녹색’, 보행자 ‘적색’ 상태로 복귀한다.
- 이후 다시 보행자 감지를 기다리는 초기 대기 상태로 진입한다.


### Algorithm Considerations
- 지속적으로 사람이 감지되더라도 일정 시간 이상 보행자 신호를 반복 제공하지 않도록 제한하여 차량 흐름 유지
- 비감지 상태로 일정 시간 경과 시 부저 및 신호 자동 리셋
- 주변 환경(비, 낙엽 등)에 따른 오탐 방지를 위한 거리 및 감지 지속 시간 조건 적용


### SUPPLEMENTARY PLAN
1. 실시간 데이터 수집 및 저장
- 초음파 센서를 통해 감지된 보행자 수, 감지 시간대, 대기 시간 등의 데이터를 ESP32 또는 외부 서버/클라우드에 주기적으로 저장
- 로컬 SD 카드 또는 Wi-Fi/BLE 기반 외부 저장소 연동

2. 데이터 분석을 통한 동적 Duty Cycle 적용
- 수집된 데이터를 기반으로 시간대별 평균 보행자 수, 감지 빈도 등을 분석
- 각 시간대별 최적의 보행자 신호 대기시간 및 통과 시간을 자동 산정 (예: 출퇴근 시간에는 신호 주기 짧게, 야간에는 길게 등)

3. AI 또는 통계 기반 알고리즘 적용 가능성
- 향후 머신러닝 모델을 이용해 신호 주기를 예측하거나 자동 조정하는 방향으로 발전 가능
- 교통 체증, 보행자 편의, 전력 효율을 모두 고려한 스마트 신호 제어 시스템으로 진화 가능



## Project Plan
### Components
ESP32 개발 보드, USB 케이블, 초음파 거리 센서(HC-SR04), LED (적색 2ea, 녹색 2ea), 330Ω 저항 4ea, 부저, 브레드보드, 점퍼 와이어, OLED 디스플레이

<img width="719" alt="image" src="https://github.com/user-attachments/assets/17ced4a6-beba-4c77-9eb6-73ab2e6eba5d" />

### Visualization
<img width="289" alt="image" src="https://github.com/user-attachments/assets/54e31e9e-13e9-4622-9406-d21f32245cf3" />


### 회로 계획
<img width="719" alt="image" src="https://github.com/user-attachments/assets/c3822e5a-2d44-4d8b-a695-82327a781290" />


### Early concept code
Early_concept 코드 참고
